---
alwaysApply: true
---
---
description: Rules for Python FastAPI Backend
globs: backend/**/*.py
---
# Backend Standards

- **API Framework:** Use FastAPI with asynchronous endpoints (`async def`).
- **Inference:** All model calls must go through `litellm.completion`.
- **Typing:** Enforce strict Pydantic v2 schemas for all request/response bodies.
- **MCP Servers:** When creating new tools, use the `fastmcp` library. Tools should be stateless and idempotent where possible.
- **Streaming:** Use `EventSourceResponse` for SSE (Server-Sent Events) to stream agent thoughts to the frontend.